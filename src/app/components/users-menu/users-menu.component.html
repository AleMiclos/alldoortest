<div class="user-form">
  <h2 *ngIf="isEditing">Atualizar Cadastro do Usuário</h2>

  <form *ngIf="isEditing" (submit)="submitForm()">
    <label for="name">Nome:</label>
    <input type="text" id="name" [(ngModel)]="selectedUser.name" name="name" required />

    <label for="email">Email:</label>
    <input type="email" id="email" [(ngModel)]="selectedUser.email" name="email" required />

    <label for="role">Função:</label>
    <select id="role" [(ngModel)]="selectedUser.role" name="role">
      <option value="admin">Administrador</option>
      <option value="user">Usuário</option>
    </select>

    <label>Permissões:</label>
    <div>
      <input type="checkbox" id="totens" [(ngModel)]="selectedUser.permissions.totens" name="totens" />
      <label for="totens">Acesso a Totens</label>
    </div>
    <div>
      <input type="checkbox" id="tvs" [(ngModel)]="selectedUser.permissions.tvs" name="tvs" />
      <label for="tvs">Acesso a TVs</label>
    </div>

    <button type="submit">Salvar Alterações</button>
    <button type="button" (click)="closeEdit()">Cancelar</button>
  </form>

  <hr />

  <h2>Usuários Cadastrados</h2>
  <table>
    <thead>
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Função</th>
        <th>Permissões</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.role }}</td>
        <td>
          <span *ngIf="user.permissions.totens">Totens</span>
          <span *ngIf="user.permissions.tvs">TVs</span>
        </td>
        <td>
          <button (click)="editUser(user)">Editar</button>
          <button (click)="deleteUser(user._id)">Deletar</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
